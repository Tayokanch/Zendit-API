🔐 **Environment Variables**

ZENDIT_API_KEY=`your_sandbox_api_key_here`

ZENDIT_BASE_URL="https://api.zendit.io/v1/esim"

PORT=3000

📥 Task 1: Fetch Available eSIMs

✅ **Goal**
This endpoint fetches a list of available eSIMs from Zendit's sandbox API. It supports required pagination controls (\_limit, \_offset) and optional filtering by country and brand (network type).

🔧 **Endpoint**
GET `/esims`

📌 **Query Parameters**

| Parameter | Required | Default | Description                                                |
| --------- | -------- | ------- | ---------------------------------------------------------- |
| `_limit`  | ✅ Yes   | 0       | Number of results per request                              |
| `_offset` | ✅ Yes   | 0       | Starting point for pagination                              |
| `country` | ❌ No    | ""      | Filter results by ISO country code (e.g., `AD` `US` `AE` ) |
| `brand`   | ❌ No    | ""      | Filter by brand/network (e.g., `eSIM`)                     |

If country and/or brand are provided, they are included as filters in the request. If not provided, the API will return results across all regions and brands.

⚙️ **Behavior & Defaults**

If no query parameters are provided, default values are automatically applied:

req.query.limit || 100;

req.query.offset || 0;

🧪 `Example Request (INSOMNIA)`

✅ Get all eSIMs (default pagination)
GET `/esims`

![alt text](default_query-1.png)


✅ Custom pagination
GET `/esims?_limit=200&_offset=100`

![alt text](offset_limit.png)


✅ Filter by country
GET `/esims?_limit=100&_offset=0&country=AE`
![alt text](filterbyCountry.png)

✅ Filter by brand
GET `/esims?_limit=200&_offset=5&brand=eSIM`
![alt text](filter_by_brand.png)

✅ Filter by country & brand

GET `/esims?_limit=200&brand=eSIM&country=US`
![alt text](filter_by_brand&country.png)

http://localhost:3000/esims?_limit=200&brand=eSIM&country=US
===============================================================================================================
===============================================================================================================

📥 Task 2: Purchase an eSIM

✅ **Goal**

Create a POST /buy-esim endpoint that allows users to initiate an eSIM purchase via the Zendit API.

| Field           | Type   | Required | Description                                             |
| --------------- | ------ | -------- | ------------------------------------------------------- |
| `offerId`       | string | ✅ Yes   | The **catalog ID** of the eSIM to be purchased          |
| `transactionId` | string | ✅ Yes   | Unique ID generated by our system to track the purchase |

NOTE

Instead of product_id (mentioned in the Task), Zendit actually expects:

offerId (a.k.a product ID)

transactionId (a unique string you generate)

🧪 `Example Request (INSOMNIA)`

POST /buy-esim

{
"offerId": "ESIM-AD-15D-UNLIMITED-NOROAM",
"transactionId":"2307ehsKEKGLE"
}

![alt text](purchase_eSIM.png)

==========================================================================
==============================

🔍 Task 3: Get Transaction by ID

✅**Goal**
This endpoint allows retrieval of detailed information about a previously made eSIM purchase using the unique `transactionId` generated during that purchase request.

🧾 Endpoint
GET `/transaction/:id`

🧠 How It Works
- `:id` in the URL path is the `transactionId`. This is the transactionId one our system generated when purchasing an eSIM.
- The controller extracts this ID from the route, calls the Zendit API, and returns the full transaction response.

📥 Path Parameter

| Parameter | Type   | Required | Description                                            |
| --------- | ------ | -------- | ------------------------------------------------------ |
| `id`      | string | ✅ Yes    | Your own system’s `transactionId` used during purchase |

💻 Example Request (INSOMNIA)

GET `/transaction/2307ehsKEKGLE`

![alt text](image.png)